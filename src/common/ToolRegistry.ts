/**
 * Auto-generated Tool Registry
 * 
 * DO NOT EDIT THIS FILE MANUALLY
 * Run 'npm run generate-tools' to regenerate
 */

import { APIGatewayTool } from '../apigateway/APIGatewayTool';
import { CloudFormationTool } from '../cloudformation/CloudFormationTool';
import { CloudWatchLogTool } from '../cloudwatch/CloudWatchLogTool';
import { FileOperationsTool } from '../common/FileOperationsTool';
import { SessionTool } from '../common/SessionTool';
import { DynamoDBTool } from '../dynamodb/DynamoDBTool';
import { EC2Tool } from '../ec2/EC2Tool';
import { EMRTool } from '../emr/EMRTool';
import { GlueTool } from '../glue/GlueTool';
import { IAMTool } from '../iam/IAMTool';
import { LambdaTool } from '../lambda/LambdaTool';
import { RDSTool } from '../rds/RDSTool';
import { RDSDataTool } from '../rdsdata/RDSDataTool';
import { S3FileOperationsTool } from '../s3/S3FileOperationsTool';
import { S3Tool } from '../s3/S3Tool';
import { SNSTool } from '../sns/SNSTool';
import { SQSTool } from '../sqs/SQSTool';
import { StepFuncTool } from '../stepfunc/StepFuncTool';
import { STSTool } from '../sts/STSTool';
import { TestAwsConnectionTool } from '../sts/TestAwsConnectionTool';

export interface ToolRegistryEntry {
  name: string;
  instance: any;
}

/**
 * Unified tool registry for both VS Code Language Model API and MCP bridge
 */
export const TOOLS: ToolRegistryEntry[] = [
  { name: 'APIGatewayTool', instance: new APIGatewayTool() },
  { name: 'CloudFormationTool', instance: new CloudFormationTool() },
  { name: 'CloudWatchLogTool', instance: new CloudWatchLogTool() },
  { name: 'FileOperationsTool', instance: new FileOperationsTool() },
  { name: 'SessionTool', instance: new SessionTool() },
  { name: 'DynamoDBTool', instance: new DynamoDBTool() },
  { name: 'EC2Tool', instance: new EC2Tool() },
  { name: 'EMRTool', instance: new EMRTool() },
  { name: 'GlueTool', instance: new GlueTool() },
  { name: 'IAMTool', instance: new IAMTool() },
  { name: 'LambdaTool', instance: new LambdaTool() },
  { name: 'RDSTool', instance: new RDSTool() },
  { name: 'RDSDataTool', instance: new RDSDataTool() },
  { name: 'S3FileOperationsTool', instance: new S3FileOperationsTool() },
  { name: 'S3Tool', instance: new S3Tool() },
  { name: 'SNSTool', instance: new SNSTool() },
  { name: 'SQSTool', instance: new SQSTool() },
  { name: 'StepFuncTool', instance: new StepFuncTool() },
  { name: 'STSTool', instance: new STSTool() },
  { name: 'TestAwsConnectionTool', instance: new TestAwsConnectionTool() }
];

/**
 * Get tool metadata from schemas
 */
export async function getToolMetadata(toolName: string): Promise<any> {
  const manifest = require('../../tool_registry/toolManifest.json');
  const tool = manifest.tools.find((t: any) => t.name === toolName);
  
  if (!tool) {
    throw new Error(`Tool not found: ${toolName}`);
  }
  
  const schemaPath = require('path').join(__dirname, tool.schemaPath);
  return require(schemaPath);
}

/**
 * Get all tool metadata
 */
export async function getAllToolMetadata(): Promise<any[]> {
  const manifest = require('../../tool_registry/toolManifest.json');
  return Promise.all(
    manifest.tools.map((t: any) => {
      const schemaPath = require('path').join(__dirname, t.schemaPath);
      return require(schemaPath);
    })
  );
}
